# Emmdra Empire - Production Environment Configuration
# Copy this file to .env.local and configure with your production credentials
# This file contains all required and optional environment variables for the SaaS platform

---

## Environment Strategy

### Why Multiple Environment Files?
We use a multi-tier environment strategy for production safety:
- **.env.example** - Template with all available options (this file)
- **.env.local** - Local development overrides (git-ignored)
- **.env.production** - Production deployment variables (server-side only)
- **Environment-specific configs** prevent credential leakage and ensure proper staging

This approach follows industry best practices for 12-factor applications and prevents accidental credential exposure.

### Why Supabase for Database?
Supabase provides enterprise PostgreSQL without DevOps overhead:
- **Instant setup** with built-in authentication and real-time features
- **Row Level Security** for data protection without middleware complexity
- **Auto-scaling** handles traffic spikes automatically
- **Developer experience** matches modern React patterns perfectly

We chose Supabase over alternatives like Firebase and PlanetScale for its PostgreSQL compatibility and superior developer tooling.

### Why Resend for Email?
Resend is the modern standard for transactional email in SaaS:
- **Developer-first API** with excellent TypeScript support
- **Global delivery network** ensuring 99.9% uptime
- **Beautiful templates** with built-in analytics and webhooks
- **GDPR compliant** with data residency options

The combination of reliability, developer experience, and cost-effectiveness made this an easy choice over SendGrid and Mailgun.

---

## Required Configuration

### Site Configuration
# Base URL for your production domain (required for email links and SEO)
NEXT_PUBLIC_SITE_URL=https://emmdraempire.com

# Application environment (affects logging and feature flags)
NEXT_PUBLIC_APP_ENV=production

### Database Configuration (Supabase)
# Your Supabase project URL (required for all database operations)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co

# Public anonymous key (required for client-side database access)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key

# Private service role key (server-side only, never expose to client)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

### Email Service (Resend)
# Resend API key for transactional emails (required for order confirmations)
RESEND_API_KEY=re_your-resend-api-key

# From email address for transactional emails
RESEND_FROM_EMAIL=noreply@emmdraempire.com

### Admin Configuration
# Comma-separated list of admin email addresses (required for admin panel access)
NEXT_PUBLIC_ADMIN_EMAILS=admin@emmdraempire.com,manager@emmdraempire.com

# Admin session timeout in seconds (default: 24 hours)
ADMIN_SESSION_TIMEOUT=86400

---

## Optional Configuration

### Enhanced Authentication (NextAuth.js)
# Secret key for NextAuth sessions (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=your-256-bit-secret-here

# Base URL for authentication callbacks
NEXTAUTH_URL=https://emmdraempire.com

# OAuth Provider Configuration (optional - for social login)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

### Alternative Email Configuration
# Fallback SMTP configuration (optional - if not using Resend)
EMAIL_SERVER=smtp://username:password@smtp.gmail.com:587
EMAIL_FROM=noreply@emmdraempire.com

# Gmail SMTP with app password (legacy option)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-16-character-app-password

### File Storage (Optional)
# Cloudinary configuration for image uploads
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret

### Payment Processing (Optional)
# Stripe configuration for payment processing
STRIPE_SECRET_KEY=your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key

# PayPal configuration
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-secret

### Analytics & Monitoring (Optional)
# Google Analytics for user behavior tracking
NEXT_PUBLIC_GA_ID=your-ga-tracking-id

# Sentry for error tracking
SENTRY_DSN=your-sentry-dsn
SENTRY_ORG=your-sentry-org
SENTRY_PROJECT=your-sentry-project

### Performance Monitoring (Optional)
# Vercel Analytics (enabled automatically with Vercel deployment)
# New Relic for detailed performance monitoring
NEW_RELIC_LICENSE_KEY=your-new-relic-key

---

## Development Configuration

### Local Development Setup
# For local development with Supabase CLI
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Local email testing (using Resend or local SMTP)
RESEND_API_KEY=re_test_key_for_local_development

### Testing Environment
NEXT_PUBLIC_APP_ENV=testing
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Separate Supabase project for testing
NEXT_PUBLIC_SUPABASE_URL=https://your-test-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-test-anon-key

---

## Configuration Guidelines

### Security Best Practices
1. **Never commit** .env.local or .env.production files
2. **Rotate keys regularly** - especially API keys and secrets
3. **Use environment-specific values** - different keys for dev/staging/prod
4. **Limit admin emails** - only add verified team member addresses
5. **Monitor access logs** - track admin panel usage

### Database Configuration
1. **Use connection pooling** for high-traffic scenarios
2. **Enable point-in-time recovery** for data protection
3. **Set up automated backups** with appropriate retention
4. **Configure alerts** for performance and security events

### Email Configuration
1. **Verify domain ownership** before going live
2. **Set up SPF, DKIM, and DMARC** records for deliverability
3. **Test email templates** in staging environment
4. **Monitor bounce rates** and delivery performance

---

## Environment Variables by Feature

### Core Platform (Required)
- NEXT_PUBLIC_SITE_URL
- NEXT_PUBLIC_APP_ENV
- NEXT_PUBLIC_SUPABASE_URL
- NEXT_PUBLIC_SUPABASE_ANON_KEY
- RESEND_API_KEY
- NEXT_PUBLIC_ADMIN_EMAILS

### Enhanced Security (Recommended)
- NEXTAUTH_SECRET
- NEXTAUTH_URL
- SUPABASE_SERVICE_ROLE_KEY

### Business Features (Optional)
- STRIPE_SECRET_KEY
- PAYPAL_CLIENT_ID
- CLOUDINARY_API_KEY

### Analytics (Optional)
- NEXT_PUBLIC_GA_ID
- SENTRY_DSN
- NEW_RELIC_LICENSE_KEY

---

## Production Checklist

Before deploying to production, ensure:

- [ ] **All required variables** are configured
- [ ] **Admin emails** are verified and limited to team members
- [ ] **Database** is properly migrated and backed up
- [ ] **Email service** is tested and domain verified
- [ ] **SSL certificates** are configured
- [ ] **Monitoring** is set up for all critical services
- [ ] **Backup procedures** are documented and tested
- [ ] **Security headers** are properly configured

---

**Emmdra Empire v4.0 - Production Environment Configuration**
**Developed by CEO (Chukwuka Emmanuel Ogugua)**

---

## Related Documentation

- **Main README** - Platform architecture and features
- **Setup Guide** - Detailed deployment instructions
- **Contributing Guide** - Development guidelines
- **Security Guide** - Security best practices
